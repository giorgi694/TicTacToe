set (SDL_MIXER_VERSION 2.28.5)

include (FetchContent)
FetchContent_Declare (
    SDL_MIXER-${SDL_MIXER_VERSION}
    URL https://github.com/libsdl-org/SDL_mixer/archive/refs/tags/release-2.6.3.tar.gz
    URL_HASH SHA256=91dd065e9e63f499e5317350b110184b0ba96bc5f63c39b3a9939a136c40c035
    DOWNLOAD_EXTRACT_TIMESTAMP ON
)

set (SDL2MIXER_OPUS OFF CACHE BOOL "" FORCE)
set (SDL2MIXER_FLAC OFF CACHE BOOL "" FORCE)
set (SDL2MIXER_MOD OFF CACHE BOOL "" FORCE)
set (SDL2MIXER_MIDI OFF CACHE BOOL "" FORCE)
set (SDL2MIXER_VORBIS "STB" CACHE STRING "" FORCE)
set (SDL2MIXER_DEBUG_POSTFIX "" CACHE STRING "" FORCE)
set (SDL2MIXER_SAMPLES OFF CACHE BOOL "" FORCE)
set (SDL2MIXER_BUILD_SHARED_LIBS ${BUILD_SHARED_LIBS} CACHE BOOL "" FORCE)

set (SDL_MIXER_SRC_DIR ${FETCHCONTENT_BASE_DIR}/sdl_mixer-${SDL_MIXER_VERSION}-src)
set (SDL_MIXER_BIN_DIR ${FETCHCONTENT_BASE_DIR}/sdl_mixer-${SDL_MIXER_VERSION}-build)

if (NOT SDL_MIXER-${SDL_MIXER_VERSION}_POPULATED)
    FetchContent_Populate (SDL_MIXER-${SDL_MIXER_VERSION})
    if (NOT BUILD_SHARED_LIBS)
        add_subdirectory (${SDL_MIXER_SRC_DIR} ${SDL_MIXER_BIN_DIR} EXCLUDE_FROM_ALL)
    else ()
        add_subdirectory (${SDL_MIXER_SRC_DIR} ${SDL_MIXER_BIN_DIR})
    endif ()
endif ()

add_library (SDL::SDL_mixer ALIAS SDL2_mixer)
